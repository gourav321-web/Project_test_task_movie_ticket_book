c
UserMailer.welcome_email(@user).deliver_later
UserMailer
c
@show.destroy?1:0
if @show.destroy
@show.destroy!
c
delete movie_show_path(movie, show)
c
movie
show
c
{delete movie_show_path(movie, show)}.to change(Show, :count).by(-1)
show
movie
movie,
movie_show_path(movie, show)
c
{delete movie_path(movie)}.to change(Movie, :count).by(-1)
expect(response).to redirect_to(movies_path)
c
expect {delete movie_path(movie)}.to change(Movie, :count).by(-1)
delete movie_path(movie)
c
patch movie_show_path(movie)
patch movie_show_path(movie, show)
   63:       }
   62:         show: { seat_price: 500 }
patch movie_show_path(movie, show), params: {
movie_show_path(movie, show)
c
e
c
@show
n
c
e
c
@show.movie_id
@show[movie_id]
@show
c
movie
c
e
c
e
c
@movie
n
@movie
movie
c
n
@show
@movie
movie
c
movie
c
@show
c
e
c
movie_id
e
n
e
n
e
n
e
@show
@movie
movie
c
e
c
@show
@show[movie_id:@movie]
@movie
c
n
@movie
n
@movie
movie
c
e
c
@show[movie_id:movie]
@show
c
movie
c
e
n
flag
row
n
movie
c
movie
e
c
@movie
movie
show
e
c
e
c
e
c
e
c
e
c
e
c
Time.current
Booking.where("show_time < ?", Time.current)
c
 booking.update(status: 'complete')
    endbooking.update(status: 'complete')
      booking.update(status: 'complete')
 bookings_to_update.find_each do |booking|
    bookings_to_update = Booking.where("show_time < ?", Time.current).where(status: "book")
c
Time.current < (show.show_time - 2.hours)
Time.current
c
n
reminder_time > Time.current
reminder_time
c
UserMailer.booking_confirmation(self).deliver_later
n
self
UserMailer.booking_confirmation(self).deliver_later
c
Time.current < (show.show_time - 2.hours)
Time.current
c
Time.current < (show.show_time - 2.hours)
Time.current
c
Time.current
c
total_available_seats
total_available_seats = selected_length + show.available_seats
selected_length + show.available_seats
c
total_available_seats
n
total_available_seats
n
total_available_seats
n
total_available_seats
show.update!(available_seats: total_available_seats)
selected_length + show.available_seats
show
booking
c
n
show
c
show
c
@show
n
booking
c
cc
c
Booking.create!(user: user,show: show,seat_numbers: "A1",status: "book")
c
Booking.create!(user: user,show: show,seat_numbers: "A1",status: "book")
c
Booking.create!(user: user,show: show,seat_numbers: "A1",status: "book")
c
        )c
          status: "book"
          seat_numbers: "A1",
          show: show,
          user: user,
Booking.create!(
          status: "book"
          seat_numbers: "A1",
          show: show,
          user: user,
Booking.create!(
booking
Booking
response
booking
c
cc
c
@movies
n
@movies
c
n
bookings_path
c
expect(response).to have_http_status(:ok)
c
n
response
bookings_path
c
show
movie
c
movie_show_path()
show_path()
show_path(movie show)
c
movie_show_path(movie show)
c
cc
movie_show_path(movie show)
movie_show_path( show)
movie_show_path(movie)
movie_show_path(movie show)
c
@show
c
show
movie
c
show
movie
c
show
c
show
c
show
movie
c
show
movie
c
@show
c
show_params
@show
c
@show
n
c
@show
